function randomInt(e,o){return Math.floor(Math.random()*(o-e+1))+e}LIBRARY({name:"ToolLib",version:23,shared:!1,api:"CoreEngine"});let ToolType={sword:{isWeapon:!0,enchantType:Native.EnchantType.weapon,damage:4,blockTypes:["fibre","plant"],calcDestroyTime:function(e,o,t,a,l,n){if(30==t.id)return.08;if(35==t.id)return.05;let i=ToolAPI.getBlockMaterialName(t.id);return"fibre"==i||"plant"==i?a.base/1.5:l}},shovel:{enchantType:Native.EnchantType.shovel,damage:2,blockTypes:["dirt"]},pickaxe:{enchantType:Native.EnchantType.pickaxe,damage:2,blockTypes:["stone"]},axe:{enchantType:Native.EnchantType.axe,damage:3,blockTypes:["wood"],defaultUseItem:function(e,o,t,a){let l=BlockSource.getDefaultForActor(a);17==t.id?(0==t.data&&(logID=VanillaTileID.stripped_oak_log),1==t.data&&(logID=VanillaTileID.stripped_spruce_log),2==t.data&&(logID=VanillaTileID.stripped_birch_log),3==t.data&&(logID=VanillaTileID.stripped_jungle_log),l.setBlock(e.x,e.y,e.z,logID,0),ToolLib.breakCarriedTool(1,a)):162==t.id&&(0==t.data?logID=VanillaTileID.stripped_acacia_log:logID=VanillaTileID.stripped_dark_oak_log,l.setBlock(e.x,e.y,e.z,logID,0),ToolLib.breakCarriedTool(1,a))}}},noDropBlocks=[26,30,31,32,51,59,92,99,100,104,105,106,115,127,132,141,142,144,161,175,199,244,385,386,388,389,390,391,392,462],ToolLib={setTool:function(e,o,t,a){Item.setToolRender(e,!0),"string"==typeof o&&(o=ToolAPI.toolMaterials[o]);let l={brokenId:a||0};for(let e in t)l[e]=t[e];o.durability||(o.durability=Item.getMaxDamage(e)),t.blockTypes||(l.isNative=!0,Item.setMaxDamage(e,o.durability)),ToolAPI.registerTool(e,o,t.blockTypes,l),t.enchantType&&Item.setEnchantType(e,t.enchantType,o.enchantability),t.useItem&&Item.registerUseFunctionForID(e,t.useItem),t.destroyBlock&&Callback.addCallback("DestroyBlock",function(o,t,a){let n=Entity.getCarriedItem(a);n.id==e&&l.destroyBlock(o,o.side,n,t,a)}),t.continueDestroyBlock&&Callback.addCallback("DestroyBlockContinue",function(o,t,a){let n=Player.getCarriedItem();n.id==e&&l.continueDestroyBlock(n,o,t,a)})},breakCarriedTool:function(e,o){o||(o=Player.get());let t=Entity.getCarriedItem(o),a=ToolAPI.getEnchantExtraData(t.extra);if(Math.random()<1/(a.unbreaking+1)&&(t.data+=e),t.data>=Item.getMaxDamage(t.id)){let e=ToolAPI.getToolData(t.id);t.id=e?e.brokenId:0,t.count=1,t.data=0}Entity.setCarriedItem(o,t.id,t.count,t.data,t.extra)},getBlockDrop:function(e,o,t,a,l,n,i){l||(l=ToolAPI.getEnchantExtraData());let r=Block.dropFunctions[o];return r?(n||(n={id:0,count:0,data:0}),i||(i=BlockSource.getDefaultForActor(Player.get())),r(e,o,t,a,l,n,i)):3==o||5==o||6==o||12==o||19==o||35==o||85==o||158==o||171==o?[[o,1,t]]:17==o||162==o?[[o,1,t]]:18==o||161==o?l.silk?[[o,1,t]]:[]:47==o?l.silk?[[47,1,0]]:[[340,3,0]]:55==o?[[331,1,0]]:60==o?[[3,1,0]]:63==o||68==o?[[338,1,0]]:64==o?[[324,1,0]]:75==o||76==o?[[76,1,0]]:79==o?l.silk?[[79,1,0]]:[]:83==o?[[338,1,0]]:89==o?[[348,randomInt(2,4),0]]:93==o||94==o?[[356,1,0]]:103==o?[[360,randomInt(3,7),0]]:123==o||124==o?[[123,1,0]]:140==o?[[390,1,0]]:149==o||150==o?[[404,1,0]]:151==o||178==o?[[151,1,0]]:193==o?[[427,1,0]]:194==o?[[428,1,0]]:195==o?[[429,1,0]]:196==o?[[430,1,0]]:197==o?[[431,1,0]]:393==o?[[335,1,0]]:464==o?[[720,1,0]]:436==o||437==o?[[472,1,0]]:441==o||442==o?[[473,1,0]]:443==o||444==o?[[474,1,0]]:445==o||446==o?[[475,1,0]]:447==o||448==o?[[476,1,0]]:467==o?[[-212,1,t]]:-1!=noDropBlocks.indexOf(o)?[]:[[Block.convertBlockToItemId(o),1,0]]},isBlock:function(e){return IDRegistry.getIdInfo(e).startsWith("block")},isItem:function(e){return IDRegistry.getIdInfo(e).startsWith("item")},addBlockDropOnExplosion:function(e){Block.registerPopResourcesFunction(e,function(e,o,t){if(Math.random()<.25){let a=Block.getDropFunction(o.id),l=ToolAPI.getEnchantExtraData(),n={id:0,count:0,data:0},i=a(e,o.id,o.data,127,l,n,t);for(let o in i)t.spawnDroppedItem(e.x+.5,e.y+.5,e.z+.5,i[o][0],i[o][1],i[o][2],i[o][3]||null)}})}};ToolAPI.setTool=ToolLib.setTool,ToolAPI.breakCarriedTool=ToolLib.breakCarriedTool;let MiningLevel={STONE:1,IRON:2,DIAMOND:3,OBSIDIAN:4};EXPORT("ToolLib",ToolLib),EXPORT("ToolType",ToolType),EXPORT("MiningLevel",MiningLevel);